<section id="goldweights">
  <div id="zoomer" class="annotations">
    <flatmap image="131029_mia348_9660">
      <div ng-repeat="view in notes">
        <note ng-repeat="note in view.annotations">
        </note>
      </div>
    </flatmap>
  </div>

  <ol id="notes">
    <li class="grouping" ng-repeat="note in notes[0].annotations" ng-class="{active: note.active}">
      <h3 ng-bind="note.title"></h3>
      <div class="description" ng-bind-html="note.trustedDescription"></div>
      <p class="play icon-{{playing ? 'pause' : 'play'}}" ng-click="play(this, $event)" ng-if="note.proverb">
        <audio ng-src="{{note.trustedAudio}}"></audio>
      </p>

      <ul>
        <li class="weight" ng-class="{tombstoned: popupWeight == this}" ng-init="mash = mash.split(' ')" ng-repeat="mash in note.attachments" ng-click="toggle(this)"> <!-- this is sketchy. I'm storing "imageName TMS_ID AccessionNumber" in the attachments field -->
          <a>
            <img ng-src="{{cdn}}thumbs/tn_{{mash[0]}}.jpg">
          </a>
          <aside ng-init="json = objects[mash[1]]" class="tombstone" ng-show="popupWeight == this">
            <h4>{{json.title}}</h4>
            <h5 ng-bind-template"{{json.artist || 'Artist unknown'}}, {{json.culture && json.culture + ','}} {{json.country}}"></h5>
            <h6>{{json.creditline}}</h6>
            <h6>{{json.accession_number}}</h6>
          </aside>
        </li>
      </ul>
    </li>
    <li class="home grouping" ng-class="{active: showDescription}"><h3>Goldweights</h3><div class="description"><p ng-bind="goldweights.description"></p></div></li>
  </ol>
  <hr>

  <div id="home">
    <a ng-click="home()" class="icon-home icon fitts-law"></a>
    <p>Tap on a goldweight to learn more.</p>
    <p>Proverbs spoken by Fred Adiyia.</p>
  </div>
</section>
